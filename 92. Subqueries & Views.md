# 92. Subqueries & Views

## Sub queries

We can wrap a query in another query, with this feature we can build more complex queries. When we perform a `SELECT` operation, it returns a result set, this result set as the same structure as a SQL table and, in it we can perform other SQL operations, it is like a in memory table. We need to assign an alis to the sub-query

```sql
SELECT * FROM sub_query AS sub_query_alias
```

```sql
SELECT *
FROM (
  SELECT *
  FROM sub_query_table_name
  ) AS sub_query_alias
```

### Sub query to INSERT

We can use a sub-query to insert data into a table. Although we must be sure that the result set returned by the sub-query as the same structure as the table we are inserting data to.

```sql
INSERT INTO table_name (column_1_name, column_2_name, column_3_name, column_4_name)
VALUES (sub_query);
```

```sql
INSERT INTO table_name (column_1_name, column_2_name, column_3_name, column_4_name)
VALUES (
  SELECT *
  FROM sub_query_table_name
  );
```

## VIEWS

We can use the `VIEW` feature to save complex queries. A view saves the query definition not the query result. So every time we use the view the query is executed again. We can then use the view as a normal table.

```sql
CREATE VIEW view_name AS SELECT * FROM table_name;
```

- [MySQL CREATE VIEW Statement](https://dev.mysql.com/doc/refman/8.0/en/create-view.html)
- [PostgreSQL CREATE VIEW](https://www.postgresql.org/docs/current/sql-createview.html)

_View sql file [14-subqueries](./sql/14-subqueries.sql) for more details._
