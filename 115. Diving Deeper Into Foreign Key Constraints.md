# 115. Diving Deeper Into Foreign Key Constraints

We can also add actions to configure what happens to a record in a table, in the case the related record is deleted or updated. The `ON DELETE` action is far more common than the `ON UPDATE` action. The `ON UPDATE` action make be more useful if we are using a non Primary Key column as the Foreign Key.

- `RESTRICT`: Prevent the intended action (e.g. deleting a related row).
- `NO ACTION`: (default): Prevent the intended action (e.g. deleting a related row). Check can be deferred, e.g. as part of a transaction.
- `CASCADE`: Perform the same action (e.g. deleting a related row) on the row with the Foreign Key.
- `SET NULL`: Set the Foreign Key value to NULL if the related row was deleted.
- `SET DEFAULT`: Set the Foreign Key value to its DEFAULT value if the related row was deleted.

## MySQL ON DELETE

```sql
CREATE TABLE table_b (
  [...]
  FOREIGN KEY table_a_fk_id REFERENCES table_a (id) ON DELETE CASCADE
  [...]
);
```

## MySQL ON UPDATE

```sql
CREATE TABLE table_b (
  [...]
  FOREIGN KEY table_a_fk_id REFERENCES table_a (id) ON UPDATE CASCADE
  [...]
);
```

We can also combine both actions

```sql
CREATE TABLE table_b (
  [...]
  FOREIGN KEY table_a_fk_id REFERENCES table_a (id) ON DELETE RESTRICT ON UPDATE CASCADE
  [...]
);
```

## PostgreSQL ON DELETE

```sql
CREATE TABLE table_b (
  [...]
  table_a_fk_id INT REFERENCES table_a (id) ON DELETE CASCADE
  [...]
);
```

### PostgreSQL ON UPDATE

```sql
CREATE TABLE table_b (
  [...]
  table_a_fk_id INT REFERENCES table_a (id) ON UPDATE CASCADE
  [...]
);
```

We can also combine both actions

```sql
CREATE TABLE table_b (
  [...]
  table_a_fk_id INT REFERENCES table_a (id) ON DELETE RESTRICT ON UPDATE CASCADE
  [...]
);
```

_View [slide 47](./slides/slides.pdf) for more details._
