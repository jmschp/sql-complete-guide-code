# 162. Working with Subquery Expressions and EXISTS

Usually `EXISTS()` is useful to work with two tables, to get all the records that exist in the second table. So usually `EXISTS()` is used as a condition to return true or false.

```sql
SELECT *
FROM table_1_name
WHERE
    EXISTS (
        SELECT *
        FROM table_2_name
        WHERE table_1_name.id = table_2_name.fk_table_1
    );
```

In our use case, where we have a orders table and a customer table, we could get all the orders from a specific customer using `EXISTS()`.

```sql
SELECT o.*
FROM orders AS o
WHERE
    EXISTS (
        SELECT c.email
        FROM customers as c
        WHERE o.customer_id = c.id AND c.email = 'max@test.com'
    );
```

In this example the same result could be achieved with a `INNER JOIN`. But depending on the use case joins can return duplicated data, without the `DISTINCT` keyword.

```sql
SELECT o.*
FROM orders AS o
LEFT JOIN customers AS c ON c.id  = o.customer_id
WHERE c.email = 'max@test.com'
```

Anther example could be to get all the costumers that have placed an order. When using `EXIST()` we would get a list of all the costumers that have an order. The same would happen with a `INNER JOIN`, although here if we do not use the `DISTINCT` keyword, we could have duplicated costumer in cases where a customer has more than one order.

```sql
SELECT *
FROM customers AS c
WHERE EXISTS (
          SELECT *
          FROM orders AS o
          WHERE o.customer_id = c.id
      );

SELECT c.*
FROM customers AS c
INNER JOIN orders AS o ON c.id  = o.customer_id;
```

Useful [StackOverflow answer](https://stackoverflow.com/a/7082510/13783004) about `EXISTS()` vs `JOIN`.
