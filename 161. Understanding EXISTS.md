# 161. Understanding EXISTS

With the `EXIST()` or `NOT EXIST()` functions we can check if certain data is present in our database. This functions takes as an argument a subquery. If a subquery returns any rows at all, `EXISTS` subquery is `TRUE`, and `NOT EXISTS` subquery is `FALSE`. `EXIST()` stops once a value is found, it does not necessarly go through the entire table.

```sql
SELECT
    EXISTS (
        SELECT *
        FROM table_name
        WHERE <some condition>
    );

SELECT
    NOT EXISTS (
        SELECT *
        FROM table_name
        WHERE <some condition>
    );
```

PostgreSQL Definition:

> ```sql
> EXISTS (subquery)
> ```
>
> The argument of `EXISTS` is an arbitrary `SELECT` statement, or subquery. The subquery is evaluated to determine whether it returns any rows. If it returns at least one row, the result of `EXISTS` is “true”; if the subquery returns no rows, the result of `EXISTS` is “false”.
>
> The subquery can refer to variables from the surrounding query, which will act as constants during any one evaluation of the subquery.
>
> The subquery will generally only be executed long enough to determine whether at least one row is returned, not all the way to completion. It is unwise to write a subquery that has side effects (such as calling sequence functions); whether the side effects occur might be unpredictable.
>
> Since the result depends only on whether any rows are returned, and not on the contents of those rows, the output list of the subquery is normally unimportant. A common coding convention is to write all `EXISTS` tests in the form `EXISTS(SELECT 1 WHERE ...)`. There are exceptions to this rule however, such as subqueries that use `INTERSECT`.
>
> This simple example is like an inner join on `col2`, but it produces at most one output row for each `tab1` row, even if there are several matching `tab2` rows:
>
> ```sql
> SELECT col1
> FROM tab1
> WHERE EXISTS (SELECT 1 FROM tab2 WHERE col2 = tab1.col2);
> ```

- [MySQL Subqueries with EXISTS or NOT EXISTS](https://dev.mysql.com/doc/refman/8.0/en/exists-and-not-exists-subqueries.html)
- [PostgreSQL Subquery Expressions EXISTS](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTSl)

_View sql file [07-exists-subquery-expressions](./sql/07-exists-subquery-expressions.sql) for more details._
